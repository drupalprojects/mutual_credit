mcapi.admin:
  path: '/admin/accounting'
  defaults:
    _controller: 'Drupal\mcapi\Controller\AccountingAdmin::systemAdminMenuBlockPage'
    _title: 'Accounting'
  requirements:
    _permission: 'access administration pages'
  options:
    _admin_route: TRUE

mcapi.admin_misc:
  path: '/admin/accounting/misc'
  defaults:
    _form: 'Drupal\mcapi\Form\MiscForm'
    _title: 'Other configuration'
  requirements:
    _permission: 'configure mcapi'
  options:
    _admin_route: TRUE

#currencies
entity.mcapi_currency.canonical:
  path: '/currency/{mcapi_currency}'
  defaults:
    _entity_view: 'mcapi_currency.default'
    _title_callback: 'Drupal\mcapi\Controller\CurrencyController::pageTitle'
  requirements:
    _permission: 'access content'
  
mcapi.admin_currency_list:
  path: '/admin/accounting/currencies'
  defaults:
    _entity_list: 'mcapi_currency'
    _title: Currencies
  requirements:
    _permission: 'manage mcapi'
  options:
    _admin_route: TRUE

entity.mcapi_currency.edit_form:
  path: '/admin/accounting/currencies/{mcapi_currency}'
  defaults:
    _entity_form: 'mcapi_currency.edit'
    _title: 'Editing currency'
  requirements:
    _permission: 'configure mcapi'
  options:
    _admin_route: TRUE

mcapi.admin_currency_add:
  path: '/admin/accounting/currencies/add'
  defaults:
    _entity_form: 'mcapi_currency.edit'
    _title: 'Editing currency'
  requirements:
    _entity_create_access: mcapi_currency
  options:
    _admin_route: TRUE

entity.mcapi_currency.delete_form:
  path: '/admin/accounting/currencies/{mcapi_currency}/delete'
  defaults:
    _entity_form: 'mcapi_currency.delete'
  requirements:
    _permission: 'configure mcapi'
  options:
    _admin_route: TRUE

mcapi.transaction_log:
  path: '/transaction/log'
  defaults:
    _entity_form: 'mcapi_transaction.admin'
    _title: 'Log transaction'
  requirements:
    _custom_access: 'Drupal\mcapi\Access\TransactionAccessControlHandler::enoughWallets'
    _permission: 'manage mcapi'
  options:
    _admin_route: TRUE

entity.mcapi_transaction.canonical:
  path: '/transaction/{mcapi_transaction}'
  defaults:
    #full means defer to the view transition settings
    _entity_view: 'mcapi_transaction.full' 
    _title_callback: 'Drupal\mcapi\Controller\TransactionController::pageTitle'
  requirements:
    _entity_access: 'mcapi_transaction.view'
  options:
    parameters:
      mcapi_transaction:
        serial: true

mcapi.admin.transactions:
  path: '/admin/accounting/transactions'
  defaults:
    _controller: 'Drupal\mcapi\ListBuilder\WorkflowListBuilder::render'
    _title: 'Transactions'
  requirements:
    _permission: 'access administration pages'
  options:
    _admin_route: TRUE

mcapi.admin.workflow.toggle:
  path: '/admin/accounting/transactions/{transition}/toggle'
  defaults:
    _form: 'Drupal\mcapi\Form\TransitionToggle'
    _title_callback: 'Drupal\mcapi\Form\TransitionToggle::title'
  requirements:
    _permission: 'configure mcapi'
  options:
    _admin_route: TRUE

mcapi.workflow_settings:
  path: '/admin/accounting/transactions/{transition}'
  defaults:
    _form: 'Drupal\mcapi\Form\TransitionSettingsForm'
    _title_callback: 'Drupal\mcapi\Form\TransitionSettingsForm::title'
  requirements:
    _permission: 'configure mcapi'
  options:
    _admin_route: TRUE

#transitions
mcapi.transaction.op:
  path: '/transaction/{mcapi_transaction}/{transition}'
  defaults:
    _entity_form: 'mcapi_transaction.transition'
  requirements:
    _entity_access: 'mcapi_transaction.transition'
  options:
    parameters:
      mcapi_transaction:
        serial: true


#wallets
entity.mcapi_wallet.canonical:
  path: '/wallet/{mcapi_wallet}'
  defaults:
    _entity_view: 'mcapi_wallet.default'
    _title_callback: 'Drupal\mcapi\Controller\WalletController::pageTitle'
  requirements:
    _entity_access: 'mcapi_wallet.summary'

mcapi.wallet_log:
  path: '/wallet/{mcapi_wallet}/log'
  defaults:
    _controller: 'Drupal\mcapi\Controller\WalletController::Templog'
    _title_callback: 'Drupal\mcapi\Controller\WalletController::pageTitle'
  requirements:
    _entity_access: 'mcapi_wallet.details'

mcapi.wallet_edit:
  path: '/wallet/{mcapi_wallet}/edit'
  defaults:
    _entity_form: 'mcapi_wallet.edit'
    _title: Modify wallet
  requirements:
    _entity_access: 'mcapi_wallet.edit'

mcapi.admin_wallets:
  path: '/admin/accounting/wallets'
  defaults:
    _form: 'Drupal\mcapi\Form\WalletSettings'
    _title: 'Wallet Settings'
  requirements:
    _permission: 'configure mcapi'

mcapi.wallets.autocomplete:
  path: '/mcapi/walletcomplete/{role}'
  defaults:
    _controller: 'Drupal\mcapi\Controller\WalletAutocompleteController::autocomplete'
  requirements:
    _custom_access: 'Drupal\mcapi\Access\TransactionAccessControlHandler::enoughWallets'
    

#this is replaced by the mcapi_exchanges module
mcapi.masspay:
  path: '/transact/masspay'
  defaults:
    _entity_form: 'mcapi_transaction.masspay'
    _title: 'Mass payment'
  requirements:
    _permission: 'manage mcapi'


