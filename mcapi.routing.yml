mcapi.admin:
  path: '/admin/accounting'
  defaults:
    _content: '\Drupal\system\Controller\SystemController::systemAdminMenuBlockPage'
    _title: 'Accounting'
  requirements:
    _permission: 'access administration pages'

mcapi.admin_misc:
  path: '/admin/accounting/config'
  defaults:
    _form: 'Drupal\mcapi\Form\AccountingMiscForm'
    _title: 'Settings'
  requirements:
    _permission: 'configure mcapi'

mcapi.admin_currency_list:
  path: '/admin/accounting/currencies'
  defaults:
    _entity_list: 'mcapi_currency'
  requirements:
    _permission: 'manage mcapi'

mcapi.admin_currency_edit:
  path: '/admin/accounting/currencies/{mcapi_currency}'
  defaults:
    _entity_form: 'mcapi_currency.edit'
  requirements:
    _permission: 'configure mcapi'

mcapi.admin_currency_delete:
  path: '/admin/accounting/currencies/{mcapi_currency}/delete'
  defaults:
    _entity_form: 'mcapi_currency.delete'
  requirements:
    _permission: 'configure mcapi'

mcapi.admin_currency_disable:
  path: '/admin/accounting/currencies/{mcapi_currency}/disable'
  defaults:
    _entity_form: 'mcapi_currency.disable'
  requirements:
    _permission: 'configure mcapi'

mcapi.admin_currency_enable:
  path: '/admin/accounting/currencies/{mcapi_currency}/enable'
  defaults:
    _entity_form: 'mcapi_currency.enable'
  requirements:
    _permission: 'configure mcapi'

mcapi.admin_mass:
  path: '/admin/accounting/mass'
  defaults:
    _form: 'Drupal\mcapi\Form\MassPay'
    _title: 'Mass payments'
  requirements:
    _permission: 'manage mcapi'

mcapi.admin_mass.many2one:
  path: '/admin/accounting/mass/many2one'
  defaults:
    _form: 'Drupal\mcapi\Form\MassPay'
    _title: 'Mass payments'
  requirements:
    _permission: 'manage mcapi'

mcapi.admin_mass.one2many:
  path: '/admin/accounting/mass/one2many'
  defaults:
    _form: 'Drupal\mcapi\Form\MassPay'
    _title: 'Mass payments'
  requirements:
    _permission: 'manage mcapi'

mcapi.workflow:
  path: '/admin/accounting/workflow'
  defaults:
    _content: '\Drupal\system\Controller\SystemController::systemAdminMenuBlockPage'
    _title: 'Transaction workflow'
  requirements:
    _permission: 'access administration pages'

mcapi.workflow.operations:
  path: '/admin/accounting/workflow/operations'
  defaults:
    _content: '\Drupal\mcapi\Controller\Workflow::summaryPage'
    _title: 'Transaction workflow operations'
  requirements:
    _permission: 'access administration pages'

mcapi.workflow_settings:
  path: '/admin/accounting/workflow/op/{op}'
  defaults:
    _form: 'Drupal\mcapi\Form\OperationSettingsForm'
    _title: 'Configure transaction operation'
  requirements:
    _permission: 'configure mcapi'

mcapi.transaction_admin:
  path: '/transact/admin'
  defaults:
    _content: '\Drupal\mcapi\Controller\view_builder::page'
    _title_callback: '\Drupal\mcapi\Controller\view_builder::pageTitle'
  requirements:
    _entity_access: 'node.view'
  defaults:
    _entity_form: 'mcapi_transaction.admin'
    _title: 'Record transaction'
  requirements:
    _permission: 'manage mcapi'

mcapi.transaction_view:
  path: '/transaction/{mcapi_transaction}'
  defaults:
    _entity_view: 'transaction.certificate'
  requirements:
    _entity_access: 'mcapi_transaction.view'
  options:
    parameters:
      mcapi_transaction:
        serial: true

mcapi.transaction.op:
  path: '/transaction/{mcapi_transaction}/{op}'
  defaults:
    _form: '\Drupal\mcapi\Form\OperationForm'
  requirements:
    _entity_access: 'mcapi_transaction.op'
  options:
    parameters:
      mcapi_transaction:
        serial: true

#this will be replaced by a view
#mcapi.wallet.view:
#  path: '/exchange/{mcapi_wallet}'
#  defaults:
 #   _entity_view: 'mcapi_wallet.full'
#  requirements:
#    _entity_access: 'mcapi_wallet.view'

mcapi.wallet_add:
  path: '/wallet/add/{entity_type}/{entity_id}'
  defaults:
    _entity_form: 'mcapi_wallet.edit'
  requirements:
    _permission: 'manage mcapi'

mcapi.wallet_edit:
  path: '/wallet/{mcapi_wallet}/edit'
  defaults:
    _entity_form: 'mcapi_wallet.edit'
  requirements:
    _entity_access: 'mcapi_wallet.edit'

mcapi.admin_exchange_list:
  path: '/admin/accounting/exchanges'
  defaults:
    _entity_list: 'mcapi_exchange'
  requirements:
    _permission: 'manage mcapi'

mcapi.exchange.view:
  path: '/exchange/{mcapi_exchange}'
  defaults:
    _entity_view: 'mcapi_exchange.full'
#these, copied from node and user entities, don't work, saying Controller "Drupal\mcapi\Controller\ExchangeController::page()" requires that you provide a value for the "$exchange" argument (because there is no default value or because there is a non optional argument after this one. 
#so instead I'm doing drupal_set_title. this new menu system is utterly obtuse
# _content: '\Drupal\mcapi\Controller\ExchangeController::page'
#_title_callback: '\Drupal\mcapi\Controller\ExchangeController::pageTitle'
  requirements:
    _entity_access: 'mcapi_exchange.view'

mcapi.exchange.add:
  path: '/exchange/add'
  defaults:
    _entity_form: 'mcapi_exchange.edit'
  requirements:
    _permission: 'manage mcapi'

mcapi.exchange.edit:
  path: '/exchange/{mcapi_exchange}/edit'
  defaults:
    _entity_form: 'mcapi_exchange.edit'
  requirements:
    _entity_access: 'mcapi_exchange.edit'

mcapi.exchange.delete:
  path: '/exchange/{mcapi_exchange}/delete'
  defaults:
    _entity_form: 'mcapi_exchange.delete'
  requirements:
    _entity_access: 'mcapi_exchange.delete'
