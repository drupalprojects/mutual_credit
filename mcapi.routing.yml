mcapi.admin:
  path: '/admin/accounting'
  defaults:
    _controller: 'Drupal\mcapi\Controller\AccountingAdmin::systemAdminMenuBlockPage'
    _title: 'Accounting'
  requirements:
    _permission: 'access administration pages'
  options:
    _admin_route: TRUE

mcapi.admin_misc:
  path: '/admin/accounting/misc'
  defaults:
    _form: 'Drupal\mcapi\Form\MiscForm'
    _title: 'Other configuration'
  requirements:
    _permission: 'configure mcapi'
  options:
    _admin_route: TRUE

mcapi.admin.transactions:
  path: '/admin/accounting/transactions'
  defaults:
    _controller: 'Drupal\mcapi\ListBuilder\WorkflowListBuilder::render'
    _title: 'Transactions'
  requirements:
    _permission: 'access administration pages'
  options:
    _admin_route: TRUE

#these have tabs. not sure whether they can be one
mcapi.admin.access.op:
  path: /admin/accounting/access/{op}
  defaults:
    _form: 'Drupal\mcapi\Form\AccessSettings'
    _title: 'Transaction Access'
  requirements:
    _permission: 'configure mcapi'

mcapi.admin_wallets:
  path: '/admin/accounting/wallets'
  defaults:
    _form: 'Drupal\mcapi\Form\WalletSettings'
    _title: 'Wallet Settings'
  requirements:
    _permission: 'configure mcapi'

mcapi.wallets.autocomplete:
  path: '/mcapi/walletcomplete/{role}'
  defaults:
    _controller: 'Drupal\mcapi\Controller\WalletAutocompleteController::autocomplete'
  requirements:
    _custom_access: 'Drupal\mcapi\Access\TransactionAccessControlHandler::enoughWallets'

mcapi.admin.transaction_form.list:
  path: '/admin/accounting/forms'
  defaults:
    _controller: 'Drupal\mcapi\Controller\FormList::buildPage'
    _title: 'Transaction forms'
  requirements:
    _permission: 'configure mcapi'
  options:
    _admin_route: TRUE

mcapi.masspay.12many:
  path: '/transaction/mass/12many'
  defaults:
    _entity_form: 'mcapi_transaction.12many'
    _title: 'One wallet pays many'
  requirements:
    _permission: 'manage mcapi'
mcapi.masspay.many21:
  path: '/transaction/mass/many21'
  defaults:
    _entity_form: 'mcapi_transaction.many21'
    _title: 'Many wallets pay one'
  requirements:
    _permission: 'manage mcapi'

#this must only show if there is one wallet per user.
#@see
mcapi.user.wallet:
  path: '/user/{user}/wallet'
  defaults: 
    _controller: '\Drupal\mcapi\Controller\WalletController::log'
    _title_callback: '\Drupal\mcapi\Controller\WalletController::userPageTitle'
  requirements:
    _custom_access: user_wallet_details_access

mcapi.wallet_log:
  path: /wallet/{mcapi_wallet}/log
  defaults: 
    _controller: Drupal\mcapi\Controller\WalletController::log
    _title_callback: Drupal\mcapi\Controller\WalletController::pageTitle
  requirements:
    _entity_access: mcapi_wallet.details